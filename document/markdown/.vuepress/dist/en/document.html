<!DOCTYPE html>
<html lang="English">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>shadow-tracker (English) | shadow-tracker document</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="a sensorless front-end data tracker">
    
    <link rel="preload" href="/shadow-tracker/assets/css/0.styles.eb7694a3.css" as="style"><link rel="preload" href="/shadow-tracker/assets/js/app.0379027f.js" as="script"><link rel="preload" href="/shadow-tracker/assets/js/2.05e023a7.js" as="script"><link rel="preload" href="/shadow-tracker/assets/js/10.fe52c43f.js" as="script"><link rel="prefetch" href="/shadow-tracker/assets/js/3.994cdbe6.js"><link rel="prefetch" href="/shadow-tracker/assets/js/4.b33c0ee4.js"><link rel="prefetch" href="/shadow-tracker/assets/js/5.7f7ed661.js"><link rel="prefetch" href="/shadow-tracker/assets/js/6.93271839.js"><link rel="prefetch" href="/shadow-tracker/assets/js/7.26e52e8f.js"><link rel="prefetch" href="/shadow-tracker/assets/js/8.03e55139.js"><link rel="prefetch" href="/shadow-tracker/assets/js/9.8350e143.js">
    <link rel="stylesheet" href="/shadow-tracker/assets/css/0.styles.eb7694a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/shadow-tracker/en/" class="home-link router-link-active"><!----> <span class="site-name">shadow-tracker document</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/shadowings-zy/shadow-tracker" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/shadow-tracker/document.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/shadow-tracker/en/document.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/shadowings-zy/shadow-tracker" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/shadow-tracker/document.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/shadow-tracker/en/document.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>shadow-tracker (English)</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/shadow-tracker/en/document.html#shadow-tracker-introduction" class="sidebar-link">shadow-tracker introduction</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/shadow-tracker/en/document.html#quick-start" class="sidebar-link">quick start</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#import-through-npm" class="sidebar-link">import through NPM</a></li><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#import-through-the-script-tag" class="sidebar-link">import through the &quot;script&quot; tag</a></li></ul></li><li><a href="/shadow-tracker/en/document.html#api-description" class="sidebar-link">API description</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#init-options" class="sidebar-link">init(options)</a></li><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#getdeviceinfo" class="sidebar-link">getDeviceInfo()</a></li><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#getperformanceinfo" class="sidebar-link">getPerformanceInfo()</a></li><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#getloglist" class="sidebar-link">getLogList()</a></li><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#gettimetravelcode" class="sidebar-link">getTimeTravelCode()</a></li></ul></li><li><a href="/shadow-tracker/en/document.html#options" class="sidebar-link">Options</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/shadow-tracker/en/document.html#loglist-description-and-custom-log" class="sidebar-link">Loglist description and custom log</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#log-object-description" class="sidebar-link">Log object description</a></li><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#description-of-event-log-object" class="sidebar-link">Description of event log object</a></li><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#error-log-object-description" class="sidebar-link">Error log object description</a></li><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#xmlhttprequest-log-object-description" class="sidebar-link">XMLHttpRequest log object description</a></li><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#device-log-object-description" class="sidebar-link">Device log object description</a></li><li class="sidebar-sub-header"><a href="/shadow-tracker/en/document.html#description-of-performance-log-object" class="sidebar-link">Description of performance log object</a></li></ul></li><li><a href="/shadow-tracker/en/document.html#time-travel-feature" class="sidebar-link">Time Travel feature</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="shadow-tracker-english"><a href="#shadow-tracker-english" class="header-anchor">#</a> shadow-tracker (English)</h1> <h2 id="shadow-tracker-introduction"><a href="#shadow-tracker-introduction" class="header-anchor">#</a> shadow-tracker introduction</h2> <p>shadow-tracker is a sensorless front-end data tracker, which provides the following functions:</p> <table><thead><tr><th>number</th> <th>function</th> <th>log type</th></tr></thead> <tbody><tr><td>1</td> <td>Collect the click and keyboard input events when the user interacts with the web page</td> <td>Event Log</td></tr> <tr><td>2</td> <td>Collect error information for all JS</td> <td>Error Log</td></tr> <tr><td>3</td> <td>Collect all XMLHttpRequest network request information</td> <td>XMLHttpRequest Log</td></tr> <tr><td>4</td> <td>Collect performance data information of page loading</td> <td>performance log</td></tr> <tr><td>5</td> <td>Collect the user's device information</td> <td>device log</td></tr> <tr><td>6</td> <td>provide time travel function, generate nightwatch E2E test code according to user's operation</td> <td>N/A</td></tr> <tr><td>7</td> <td>support custom expansion of logs</td> <td>N/A</td></tr></tbody></table> <p>Note: <code>performance data information of page loading</code> supports IE9 and above browsers, and other functions support IE7 and above browsers.</p> <h2 id="quick-start"><a href="#quick-start" class="header-anchor">#</a> quick start</h2> <h3 id="import-through-npm"><a href="#import-through-npm" class="header-anchor">#</a> import through NPM</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> shadow-tracker
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> tracker <span class="token keyword">from</span> <span class="token string">'shadow-tracker'</span><span class="token punctuation">;</span>

Tracker<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// initialize tracker</span>
Console<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>tracker<span class="token punctuation">.</span><span class="token function">Getloglist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// get log information</span>
</code></pre></div><h3 id="import-through-the-script-tag"><a href="#import-through-the-script-tag" class="header-anchor">#</a> import through the &quot;script&quot; tag</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./shadow-tracker-script.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  Window<span class="token punctuation">.</span>Tracker<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// initialize tracker</span>
  Console<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>Tracker<span class="token punctuation">.</span><span class="token function">Getloglist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// get the log information</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Note: due to the limited server resources, it is recommended to download the shadow-tracker script file from <code>&quot;http://www.shadowtracker.top/shadowtracker/script/shadow-tracker-script.js&quot;</code>.</p> <h2 id="api-description"><a href="#api-description" class="header-anchor">#</a> API description</h2> <h3 id="init-options"><a href="#init-options" class="header-anchor">#</a> init(options)</h3> <p>Initialize tracker</p> <p>Parameter Description:
Options - configuration item object, see part 4 &quot;options&quot;</p> <p>Use example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>tracker<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getdeviceinfo"><a href="#getdeviceinfo" class="header-anchor">#</a> getDeviceInfo()</h3> <p>Get user's device information and write the device information into the loglist. For details, see part 5 &quot;loglist description and custom log&quot;</p> <p>Use example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tracker<span class="token punctuation">.</span><span class="token function">getDeviceInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getperformanceinfo"><a href="#getperformanceinfo" class="header-anchor">#</a> getPerformanceInfo()</h3> <p>Get the page performance data and write the page performance information into the loglist. For details, see part 5 &quot;loglist description and custom log&quot;</p> <p>Use example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tracker<span class="token punctuation">.</span><span class="token function">getPerformanceInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getloglist"><a href="#getloglist" class="header-anchor">#</a> getLogList()</h3> <p>Get all log data. For details, see part 5 &quot;loglist description and custom log&quot;</p> <p>Use example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tracker<span class="token punctuation">.</span><span class="token function">getLogList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="gettimetravelcode"><a href="#gettimetravelcode" class="header-anchor">#</a> getTimeTravelCode()</h3> <p>Get the time travel code. For details, see part 6 &quot;time travel&quot;</p> <p>Use example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tracker<span class="token punctuation">.</span><span class="token function">getTimeTravelCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="options"><a href="#options" class="header-anchor">#</a> Options</h2> <p>When initialize tracker, a configuration object can be passed in to enrich the functionality of the tracker.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//This is the default configuration item for shadow-tracker, let's take this example</span>
<span class="token keyword">const</span> option <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">sessionId</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// sessionId, default is current timestamp and random number</span>
  <span class="token literal-property property">useClass</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// whether to use class as the unique ID of the element</span>
  <span class="token literal-property property">maxResponseTextLength</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// maximum length of XMLHttpRequest return value</span>
  <span class="token literal-property property">timeTracelInitTime</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token comment">// wait time for initialization page in generated time travel code</span>
  <span class="token literal-property property">timeTravelClickDelayTime</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// delay time of clicking element in generated time travel code</span>
  <span class="token literal-property property">timeTracelInputDelayTime</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// delay time of input data in generated time travel code</span>
  <span class="token literal-property property">captureEvent</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// whether to capture event log</span>
  <span class="token literal-property property">captureJsError</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// whether to capture error log</span>
  <span class="token literal-property property">captureXMLHttpRequest</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// whether to capture request log</span>
  <span class="token literal-property property">custom</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// whether to add custom data to the log object</span>
  <span class="token function-variable function">customizeLog</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">logType<span class="token punctuation">,</span> logContent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// functions that generate custom log data, see part 5 &quot;LogList description and custom Log&quot;</span>
  <span class="token function-variable function">customizeEventLog</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// functions to generate custom event logs, see part 5 &quot;LogList description and custom logs&quot;</span>
  <span class="token function-variable function">customizeErrorLog</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// functions to generate custom error logs, see part 5 &quot;LogList description and custom logs&quot;</span>
  <span class="token function-variable function">customizeXMLHttpRequestLog</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// functions to generate custom XMLHttpRequest logs, see part 5 &quot;LogList description and custom logs&quot;</span>
  <span class="token function-variable function">customizeDeviceLog</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">userAgent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// functions to generate custom device logs, see part 5 &quot;LogList description and custom logs&quot;</span>
  <span class="token function-variable function">customizePerformanceLog</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">performance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// functions to generate custom performance logs, see part 5 &quot;LogList description and custom logs&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="loglist-description-and-custom-log"><a href="#loglist-description-and-custom-log" class="header-anchor">#</a> Loglist description and custom log</h2> <p>Loglist is a JS array for storing all logs. We can use <code>getloglist()</code> to get this array, and further develop the logic of log reporting and log storage according to our business needs.
In addition, we can expand the log object according to our own business requirements.</p> <p>If we need to add custom data, first we need to assign the <code>custom</code> attribute in the configuration item object passed in to the tracker to true, and implement the custom data function according to our own needs.</p> <h3 id="log-object-description"><a href="#log-object-description" class="header-anchor">#</a> Log object description</h3> <h4 id="basic-description"><a href="#basic-description" class="header-anchor">#</a> Basic description</h4> <p>The log object is the basic log object, which contains the following properties:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;logtime&quot;</span><span class="token operator">:</span> <span class="token number">1584262658187</span><span class="token punctuation">,</span> <span class="token comment">// log generation time</span>
  <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;www.shadowingszy.top&quot;</span><span class="token punctuation">,</span> <span class="token comment">// the URL that generates the log page</span>
  <span class="token string-property property">&quot;logSession&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> <span class="token comment">// sessionId</span>
  <span class="token string-property property">&quot;logType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Error Log&quot;</span><span class="token punctuation">,</span> <span class="token comment">// the types of logs, including: event log | error log | XMLHttpRequest log | device log | performance log</span>
  <span class="token string-property property">&quot;logContent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// specific log information</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="custom-description"><a href="#custom-description" class="header-anchor">#</a> Custom description</h4> <p>The custom log object contains the following properties:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;logtime&quot;</span><span class="token operator">:</span> <span class="token number">1584262658187</span><span class="token punctuation">,</span> <span class="token comment">// log generation time</span>
  <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;www.shadowingszy.top&quot;</span><span class="token punctuation">,</span> <span class="token comment">// the URL that generates the log page</span>
  <span class="token string-property property">&quot;logSession&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> <span class="token comment">// sessionId</span>
  <span class="token string-property property">&quot;logtype&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error log&quot;</span><span class="token punctuation">,</span> <span class="token comment">// the types of logs, including: event log | error log | XMLHttpRequest log | device log | performance log</span>
  <span class="token string-property property">&quot;logcontent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// specific log information</span>
  <span class="token string-property property">&quot;custom&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">// custom log fields</span>
    <span class="token string-property property">&quot;log&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// the value returned after executing the customizelog() method in the configuration item</span>
    <span class="token string-property property">&quot;detail&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// the value returned by a type of log after executing the corresponding customizeeventlog(), customizeerrorlog(), customizexmlhttprequestlog(), customizedevicelog(), customizeperformancelog() methods in the configuration item</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>By implementing the 'customizelog' method in the configuration item, we can customize the log object and use the return value of the 'customizelog' function as the value of the 'custom. Log' attribute in the log object.</p> <p><code>Customizelog</code>method parameter description:</p> <table><thead><tr><th>parameter name</th> <th>parameter type</th> <th>parameter description</th></tr></thead> <tbody><tr><td>logType</td> <td>string</td> <td>the type of log, including:<code>event log | error log | XMLHttpRequest log | device log | performance log</code></td></tr> <tr><td>logContent</td> <td>object</td> <td>log specific information</td></tr></tbody></table> <h3 id="description-of-event-log-object"><a href="#description-of-event-log-object" class="header-anchor">#</a> Description of event log object</h3> <h4 id="basic-description-2"><a href="#basic-description-2" class="header-anchor">#</a> Basic description</h4> <p>The event log object is a log object that records user clicks and enters events. It will be displayed in the <code>logContent</code> property of the corresponding type of log object.
Event log includes two types of log: &quot;click&quot; and &quot;input&quot;, respectively including the following attributes:</p> <p>Click event:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
<span class="token string-property property">&quot;dompPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;H1&quot;</span><span class="token punctuation">,</span> <span class="token comment">// the DOM path of the current event</span>
<span class="token string-property property">&quot;trackingType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MouseDown&quot;</span><span class="token punctuation">,</span> <span class="token comment">// event</span>
<span class="token string-property property">&quot;offsetX&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.5&quot;</span><span class="token punctuation">,</span> <span class="token comment">// the relative X coordinate of the current click event. If the current page width is 700, then the X of the click event is 350</span>
<span class="token string-property property">&quot;offsetY&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.5&quot;</span> <span class="token comment">// the relative X coordinate of the current click event. If the current page width is 700, then the y of the click event is 350</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Enter event:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
<span class="token string-property property">'domPath'</span><span class="token operator">:</span> <span class="token string">'H1'</span><span class="token punctuation">,</span> <span class="token comment">// the DOM path of the current event</span>
<span class="token string-property property">&quot;trackingType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Keyup&quot;</span><span class="token punctuation">,</span> <span class="token comment">// event</span>
<span class="token string-property property">&quot;inputKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token comment">// the entered value</span>
<span class="token string-property property">&quot;currentValue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span> <span class="token comment">// the value of the current input box</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="custom-description-2"><a href="#custom-description-2" class="header-anchor">#</a> Custom description</h4> <p>By implementing the <code>customizeEventLog()</code> method in the configuration item, we can customize the log object and use the return value of the <code>customizeEventLog()</code> function as the value of the <code>custom.detail</code> attribute in the log object.</p> <p><code>customizeEventLog()</code> method parameter description:</p> <table><thead><tr><th>parameter name</th> <th>parameter type</th> <th>parameter description</th></tr></thead> <tbody><tr><td>event</td> <td>object</td> <td>the event object that currently triggers the event</td></tr></tbody></table> <h3 id="error-log-object-description"><a href="#error-log-object-description" class="header-anchor">#</a> Error log object description</h3> <h4 id="basic-description-3"><a href="#basic-description-3" class="header-anchor">#</a> Basic description</h4> <p>Error log object is a log object that records JS errors on the current page. It will be displayed in the <code>logContent</code> property of the corresponding type of log object.
The error log object contains the following properties:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
<span class="token string-property property">&quot;Errortype&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Customize&quot;</span><span class="token punctuation">,</span> <span class="token comment">// the type of error, including: JS | customize | window.onerror | window.onunhandledrection</span>
<span class="token string-property property">&quot;Errormsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;this is error message&quot;</span><span class="token punctuation">,</span> <span class="token comment">// error message</span>
<span class="token string-property property">&quot;Linenumber&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// the number of lines in the error location</span>
<span class="token string-property property">&quot;Columnnumber&quot;</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// the number of columns where the error occurred</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Note: errorType details</p> <table><thead><tr><th>type</th> <th>Description</th></tr></thead> <tbody><tr><td>js</td> <td>JavaScript code error</td></tr> <tr><td>customize</td> <td><code>console. Error()</code> reports an error, which does not contain error stack information</td></tr> <tr><td>window.onerror</td> <td><code>window.onerror</code> callback error</td></tr> <tr><td>window.onunhandledrejection</td> <td><code>window.onunhandledrejection</code> callback reports an error</td></tr></tbody></table> <h4 id="customize-description"><a href="#customize-description" class="header-anchor">#</a> customize description</h4> <p>By implementing the <code>customizeErrorLog()</code> method in the configuration item, we can customize the log object and use the return value of the <code>customizeErrorLog()</code> function as the value of the <code>custom.detail</code> attribute in the log object.</p> <p><code>customizeErrorLog</code> method parameter description:</p> <table><thead><tr><th>parameter name</th> <th>parameter type</th> <th>parameter description</th></tr></thead> <tbody><tr><td>error</td> <td>object</td> <td>the error object that triggered the error</td></tr></tbody></table> <h3 id="xmlhttprequest-log-object-description"><a href="#xmlhttprequest-log-object-description" class="header-anchor">#</a> XMLHttpRequest log object description</h3> <h4 id="basic-description-4"><a href="#basic-description-4" class="header-anchor">#</a> Basic description</h4> <p>XMLHttpRequest log object is a log object that records XMLHttpRequest. It will be displayed in the <code>logContent</code> attribute of the corresponding type of log object.
XMLHttpRequest log contains two types of log: &quot;request start&quot; and &quot;request end&quot;, respectively including the following attributes:</p> <p>Request start:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
<span class="token string-property property">&quot;Event&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ajaxloadstart&quot;</span> <span class="token comment">// current event</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Request end:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
<span class="token string-property property">&quot;Event&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ajaxloadend&quot;</span><span class="token punctuation">,</span> <span class="token comment">// current event</span>
<span class="token string-property property">&quot;Status&quot;</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">// status code</span>
<span class="token string-property property">&quot;Response&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span> <span class="token comment">// return content</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="customize-description-2"><a href="#customize-description-2" class="header-anchor">#</a> customize description</h4> <p>By implementing the <code>customizeXMLHttpRequestlog()</code> method in the configuration item, we can customize the log object and use the return value of the <code>customizeXMLHttpRequestlog()</code> function as the value of the <code>custom.detail</code> attribute in the log object.</p> <p><code>customizeXMLHttpRequestlog()</code> method parameter description:</p> <table><thead><tr><th>parameter name</th> <th>parameter type</th> <th>parameter description</th></tr></thead> <tbody><tr><td>event</td> <td>object</td> <td>event triggering 'ajaxloadstart' or 'ajaxloadend'</td></tr></tbody></table> <h3 id="device-log-object-description"><a href="#device-log-object-description" class="header-anchor">#</a> Device log object description</h3> <h4 id="basic-description-5"><a href="#basic-description-5" class="header-anchor">#</a> Basic description</h4> <p>The device log object is a log object that records user device information. It will be displayed in the <code>logContent</code> property of the corresponding type of log object, including the following properties:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
<span class="token string-property property">&quot;Browser&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// whether it is a PC browser</span>
<span class="token string-property property">&quot;Mobile&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// is the mobile browser</span>
<span class="token string-property property">&quot;Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;computer&quot;</span><span class="token punctuation">,</span> <span class="token comment">// the category of the current terminal, including: computer, IOS, Android, wechat, Windows Phone, unknown</span>
<span class="token string-property property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;80.0.3987.132&quot;</span><span class="token punctuation">,</span> <span class="token comment">// version number</span>
<span class="token string-property property">&quot;Name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Chrome&quot;</span><span class="token punctuation">,</span> <span class="token comment">// the category of the current browser, including: MSIE, Firefox, chrome, sarfari, Android, IOS, unknown</span>
<span class="token string-property property">&quot;Useragent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span> <span class="token comment">// value of navigator.useragent</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="customize-description-3"><a href="#customize-description-3" class="header-anchor">#</a> customize description</h4> <p>By implementing the <code>customizeDeviceLog()</code> method in the configuration item, we can customize the log object and take the return value of the <code>customizeDeviceLog()</code> function as the value of the <code>custom.detail</code> attribute in the log object.</p> <p><code>customizeDeviceLog()</code> method parameter description:</p> <table><thead><tr><th>parameter name</th> <th>parameter type</th> <th>parameter description</th></tr></thead> <tbody><tr><td>device</td> <td>object</td> <td><code>navigator.useragent</code> object</td></tr></tbody></table> <h3 id="description-of-performance-log-object"><a href="#description-of-performance-log-object" class="header-anchor">#</a> Description of performance log object</h3> <h4 id="basic-instructions"><a href="#basic-instructions" class="header-anchor">#</a> Basic instructions</h4> <p>The performance log object is a log object that records page performance data. It will be displayed in the <code>logContent</code> property of the corresponding type of log object, including the following properties:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
<span class="token string-property property">&quot;loadType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;reload&quot;</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;Loadpagetime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// the time when the page loading is completed</span>
<span class="token string-property property">&quot;Domreadytime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// time to parse DOM tree structure</span>
<span class="token string-property property">&quot;Redirecttime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// redirection time</span>
<span class="token string-property property">&quot;Domainlookuptime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// DNS query time</span>
<span class="token string-property property">&quot;Timetofirstbyte&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// the time taken to read the first byte of the page, that is, the time taken by the user to get your resources</span>
<span class="token string-property property">&quot;Requesttime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// time when content loading is completed</span>
<span class="token string-property property">&quot;Loadeventtime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// the time when the onload callback function is executed</span>
<span class="token string-property property">&quot;Cachetime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// DNS cache time</span>
<span class="token string-property property">&quot;Unloadtime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// time to unload the page</span>
<span class="token string-property property">&quot;Connecttime&quot;</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// the time for TCP to establish the connection and complete the handshake</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Note: the performance log object uses <code>window.performance</code> to record page performance data, so only IE9 and above browsers are supported</p> <h4 id="user-defined-description"><a href="#user-defined-description" class="header-anchor">#</a> User defined description</h4> <p>By implementing the <code>customizePerformanceLog()</code> method in the configuration item, we can customize the log object and take the return value of the <code>customizePerformanceLog()</code> function as the value of the <code>custom.detail</code> attribute in the log object.</p> <p><code>customizePerformanceLog()</code> method parameter description:</p> <table><thead><tr><th>parameter name</th> <th>parameter type</th> <th>parameter description</th></tr></thead> <tbody><tr><td>performance</td> <td>object</td> <td><code>window.performance</code> object</td></tr></tbody></table> <h2 id="time-travel-feature"><a href="#time-travel-feature" class="header-anchor">#</a> Time Travel feature</h2> <p>This feature reproduces all user actions based on Event Log data in the logList and generates NightWatch E2E test code from the logs. We only need to install NightWatch and execute this code to reproduce user actions.</p> <p>We can set parameters in the tacker configuration item.</p> <table><thead><tr><th>Parameter Name</th> <th>Parameter Description</th></tr></thead> <tbody><tr><td>timeTracelInitTime</td> <td>Initialize page wait time in generated time travel code</td></tr> <tr><td>timeTravelClickDelayTime</td> <td>Delay time of click on the element in generated time travel code</td></tr> <tr><td>timeTracelInputDelayTime</td> <td>Delay time of input data in generated time travel code</td></tr></tbody></table> <p>Generate code examples:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Function <span class="token function">test</span> <span class="token punctuation">(</span><span class="token parameter">browser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Browser
    <span class="token punctuation">.</span><span class="token function">url</span> <span class="token punctuation">(</span><span class="token string">'www.shadowingszy.top'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pause</span> <span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>assert<span class="token punctuation">.</span><span class="token function">elementPresent</span> <span class="token punctuation">(</span><span class="token string">'#xml-test'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span> <span class="token punctuation">(</span><span class="token string">'#xml-test'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pause</span> <span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>assert<span class="token punctuation">.</span><span class="token function">elementPresent</span> <span class="token punctuation">(</span><span class="token string">'#get-log'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span> <span class="token punctuation">(</span><span class="token string">'#get-log'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pause</span> <span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>assert<span class="token punctuation">.</span><span class="token function">elementPresent</span> <span class="token punctuation">(</span><span class="token string">'#get-log'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span> <span class="token punctuation">(</span><span class="token string">'#get-log'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pause</span> <span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/shadow-tracker/assets/js/app.0379027f.js" defer></script><script src="/shadow-tracker/assets/js/2.05e023a7.js" defer></script><script src="/shadow-tracker/assets/js/10.fe52c43f.js" defer></script>
  </body>
</html>
